<!DOCTYPE html>
<html>
<head>
  <title>Deadlift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
  <script type="text/javascript" data-main="init.js" src="require.js"></script>
</head>

<body>

<div class="container-fluid">
  <div data-bind="visible: wizardStep() === 0" class="span8 offset4">
    <form data-bind="submit: herokuApiKeySubmit">
        <fieldset>
            <legend>Strider Installer</legend>
            <label>Heroku API Key</label>
            <div class="control-group" data-bind="css: { error: herokuApiKeyInvalid() && !inProgress() }">
              <div class="input-append">
                <input data-bind="value: herokuApiKey" class="input-xlarge" type="password" placeholder="API key"></input>
                <span style="display: none;" class="help-inline add-on" data-bind="visible: herokuApiKeyInvalid() && !inProgress()">Heroku API key invalid</span>
                <img class="add-on" src="/spinner.gif" style="display: none;" data-bind="visible: inProgress" />
              </div>
            </div>
            <span class="help-block">Find this on your <a target="_blank" href="https://dashboard.heroku.com/account">Heroku account page</a>. For your security, we don't persist this anywhere.</span>
            <div class="btn-grp">
              <button disabled="1" class="btn">Previous</button>
              <button type="submit" class="btn btn-primary" data-bind="disable: inProgress">Next</button>
            </div>
        </fieldset>
    </form>
  </div>

  <div data-bind="visible: wizardStep() === 1" class="span8 offset4" style="display: none;">
    <form data-bind="submit: herokuAppSelectSubmit ">
        <fieldset>
            <legend>Strider Installer</legend>
            <label>Choose Heroku App</label>
            <div class="control-group">
              <select data-bind="options: herokuApps, value: herokuAppName, optionsCaption: 'Select an existing app...'"></select>
            </div>
            <div class="control-group" data-bind="css: { error: herokuAppNameInvalid() && !herokuAppName() }">
              <div class="input-append">
                <input data-bind="value: newHerokuAppName, disable: herokuAppName, valueUpdate: 'afterkeydown'" class="input-xlarge" type="text" placeholder="Or create a new Heroku app"></input>
                <span class="help-inline add-on" data-bind="visible: herokuAppNameInvalid() && !herokuAppName(), text: herokuAppNameInvalid"></span>
                <img class="add-on" src="/spinner.gif" style="display: none;" data-bind="visible: inProgress" />
              </div>
            </div>

            <div class="btn-grp">
              <button class="btn" data-bind="click: wizardPrevious">Previous</button>
              <button type="submit" class="btn btn-primary" data-bind="disable: inProgress, enable: herokuAppName() || newHerokuAppName()">Next</button>
            </div>
        </fieldset>
    </form>
  </div>
  <div data-bind="visible: wizardStep() === 2" class="span8 offset4" style="display: none;">
    <form data-bind="submit: oauthSubmit" class="form-horizontal">
        <fieldset>
            <legend>Strider Installer</legend>
            <label>Create Github OAuth App</label>
            <p>Strider needs a Github Access Key and Secret in order to use the Github API.
            You can create one at <a href="https://github.com/settings/applications/new" target="_blank">Github Settings/Applications</a> page.
            </p>
            <p>
            You should copy &amp; paste the following values for Mail URL and Callback URL:
            </p>
            <div class="control-group">
              <label class="control-label" for="mainUrl">Main URL</label>
              <div class="controls">
                <input id="mainUrl" class="input-xlarge uneditable-input" data-bind="value: 'https://' +  herokuAppName() + '.herokuapp.com' " type="text"/>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="callbackUrl">Callback URL</label>
              <div class="controls">
                <input id="callbackUrl" class="input-xlarge uneditable-input" data-bind="value: 'https://' +  herokuAppName() + '.herokuapp.com/auth/github/callback' " type="text" />
              </div>
            </div>
            <div class="control-group" data-bind="css: { error: clientID() === undefined }">
              <label class="control-label" for="clientID">Github Client ID</label>
              <div class="controls">
                <input id="clientID" data-bind="value: clientID" type="text" placeholder="Client ID"></input>
                <span class="help-inline" data-bind="visible: clientID"></span>
              </div>
            </div>
            <div class="control-group" data-bind="css: { error: clientSecret() === undefined || clientSecret().length < 6 }">
              <label class="control-label" for="clientSecret">Github Client Secret</label>
              <div class="controls">
                <input id="clientSecret" data-bind="value: clientSecret" type="text" placeholder="Client Secret"></input>
                <span class="help-inline" data-bind="visible: clientSecret() === undefined || clientSecret().length < 6">Invalid Client Secret </span>
              </div>
            </div>

            <div class="btn-grp">
              <button class="btn" data-bind="click: wizardPrevious">Previous</button>
              <button type="submit" class="btn btn-primary">Next</button>
            </div>
        </fieldset>
    </form>
  </div>

  <div data-bind="visible: wizardStep() === 3" class="span8 offset4" style="display: none;">
    <form data-bind="submit: adminUserSubmit" class="form-horizontal">
        <fieldset>
            <legend>Strider Installer</legend>
            <label>Create Initial Admin User</label>
            <div class="control-group" data-bind="css: { error: adminUserEmailInvalid }">
              <label class="control-label" for="adminEmail">Email</label>
              <div class="controls">
                <input id="adminEmail" data-bind="value: adminUserEmail" type="text" placeholder="e.g. janedoe@example.com"></input>
                <span class="help-inline" data-bind="visible: adminUserEmailInvalid"></span>
              </div>
            </div>
            <div class="control-group" data-bind="css: { error: adminUserPassword() === undefined || adminUserPassword().length < 6 }">
              <label class="control-label" for="adminPassword">Password</label>
              <div class="controls">
                <input id="adminPassword" data-bind="value: adminUserPassword, valueUpdate: 'afterkeydown'" type="password" placeholder="password"></input>
                <span class="help-inline" data-bind="visible: adminUserPassword() === undefined || adminUserPassword().length < 6">Password must be at least 6 characters</span>
              </div>
            </div>

            <div class="btn-grp">
              <button class="btn" data-bind="click: wizardPrevious">Previous</button>
              <button type="submit" class="btn btn-primary">Next</button>
            </div>
        </fieldset>
    </form>
  </div>

</div>

</body>
</html>
